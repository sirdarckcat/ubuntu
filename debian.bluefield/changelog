linux-bluefield (5.4.0-1002.3) UNRELEASED; urgency=medium

  CHANGELOG: Do not edit directly. Autogenerated at release.
  CHANGELOG: Use the printchanges target to see the curent changes.
  CHANGELOG: Use the insertchanges target to create the final log.

 -- Wen-chien Jesse Sung <jesse.sung@canonical.com>  Thu, 11 Jun 2020 19:41:13 +0800

linux-bluefield (5.4.0-1001.2) focal; urgency=medium

  * Packaging resync (LP: #1786013)
    - [Packaging] update variants
    - [Packaging] update helper scripts
    - [Packaging] update update.conf

  * Miscellaneous Ubuntu changes
    - SAUCE: net/mlx5: E-Switch, Do not query stats of disabled vport
    - SAUCE: net/mlx5: E-Switch, Add SF vport, vport-rep support
    - SAUCE: net/mlx5: E-Switch, Disallow modify vport state down on disabled SF
      vport
    - SAUCE: net/mlx5: E-switch, Disable QoS if enabling eswitch fails
    - SAUCE: net/mlx5: E-Switch, Do not enable vports again
    - SAUCE: net/mlx5: E-Switch, Add SF vport, vport-rep support
    - SAUCE: net/mlx5: Introduce SF table framework
    - SAUCE: net/mlx5: Introduce SF life cycle APIs to allocate/free
    - SAUCE: net/mlx5: E-Switch, Enable/disable SF's vport during SF life cycle
    - SAUCE: net/mlx5: Add support for mediated devices in switchdev mode
    - SAUCE: net/mlx5: Share irqs between SFs and parent PCI device
    - SAUCE: net/mlx5: Add load/unload routines for SF driver binding
    - SAUCE: net/mlx5: Implement dma ops and params for mediated device
    - SAUCE: net/mlx5: Add mdev driver to bind to mdev devices
    - SAUCE: net/mlx5: Add query for mac address
    - SAUCE: net/mlx5: Implement mac address setting for SF vport
    - SAUCE: net/mlx5: Correctly add query for mac address
    - SAUCE: net/mlx5: Expose rep netdevice name for the mdev representor
    - SAUCE: net/mlx5: Support modifying max_sfs
    - SAUCE: net/mlx5: E-Switch, Wrongly using eswitch vport_num as host
      vport_index
    - SAUCE: net/mlx5e: Implement phys_port_name for mdev SFs
    - SAUCE: IB/mlx5: Fix missing congestion control debugfs on rep rdma device
    - SAUCE: net/mlx5: Fix mdev create - devlink deadlock
    - SAUCE: net/mlx5: Print mac address with leading zero
    - SAUCE: net/mlx5: Update rep state after loading the rep
    - SAUCE: netfilter: nf_flowtable: remove flow_offload_entry structure
    - SAUCE: netfilter: nf_tables: add flowtable offload control plane
    - SAUCE: netfilter: nf_tables_offload: pass extack to
      nft_flow_cls_offload_setup()
    - SAUCE: netfilter: nf_tables: add nft_unregister_flowtable_hook()
    - SAUCE: net: core: rename indirect block ingress cb function
    - SAUCE: netfilter: nf_tables: dynamically allocate hooks per net_device in
      flowtables
    - SAUCE: netfilter: nf_tables: fix memory leak in
      nf_tables_parse_netdev_hooks()
    - SAUCE: netfilter: flowtable: refresh flow if hardware offload fails
    - SAUCE: netfilter: flowtable: add nf_flow_offload_tuple() helper
    - SAUCE: bitmap: Introduce bitmap_cut(): cut bits and shift remaining
    - SAUCE: netfilter: Replace zero-length array with flexible-array member
    - SAUCE: netfilter: Introduce egress hook
    - SAUCE: netfilter: flowtable: reload ip{v6}h in nf_flow_nat_ip{v6}
    - SAUCE: netfilter: nf_flow_table_offload: fix kernel NULL pointer dereference
      in nf_flow_table_indr_block_cb
    - SAUCE: flow_offload: Add flow_match_ct to get rule ct match
    - SAUCE: netfilter: nf_conntrack, add IPS_HW_OFFLOAD status bit
    - SAUCE: net/mlx5: Add copy header action struct layout
    - SAUCE: net/mlx5: Add mlx5_ifc definitions for connection tracking support
    - SAUCE: net/mlx5: Rename FDB_* tc related defines to FDB_TC_* defines
    - SAUCE: net/mlx5: E-Switch, Alloc and free unique metadata for match
    - SAUCE: net/mlx5: Treat host PF vport as other (non eswitch manager) vport
    - SAUCE: net/mlx5: Remove unused prio functions
    - SAUCE: net/mlx5: E-switch, Fix num vports calculation for steering init
    - SAUCE: net/mlx5: Limit maximum number of completion EQs to 4 for SF
    - SAUCE: net;/mlx5: Disable command cache for SFs
    - SAUCE: net/mlx5: E-Switch, Enable VF vports when num of vf changed
    - SAUCE: net/mlx5: Use the correct IPsec capability function for FPGA ops
    - SAUCE: net/mlx5e: en_accel, Add missing net/geneve.h include
    - SAUCE: net/mlx5: Refactor mlx5_accel_esp_create_hw_context parameter list
    - SAUCE: net/mlx5: IPsec, Refactor SA handle creation and destruction
    - SAUCE: net/mlx5: Introduce IPsec Connect-X offload hardware bits and
      structures
    - SAUCE: net/mlx5: Refactor imm_inval_pkey field in cqe struct
    - SAUCE: net/mlx5: TX WQE Add trailer insertion field
    - SAUCE: net/mlx5: IPsec, Fix coverity issue
    - SAUCE: net/mlx5: Add support for COPY steering action
    - SAUCE: mlx5/core: FPGA, Check if FPGA IPSec is supported when assigning
      handle_rx_cqe
    - SAUCE: net/mlx5: Accel, Add core IPsec support for the Connect-X family
    - SAUCE: net/mlx5e: Receive flow steering framework for accelerated Ethernet
      flows
    - SAUCE: net/mlx5: IPsec: Add HW crypto offload support
    - SAUCE: net/mlx5: IPsec: Add flow steering rule API for ipsec_ops
    - SAUCE: net/mlx5: Add IPsec related Flow steering entry's fields
    - SAUCE: net/mlx5e: IPsec: Add RX decrypt FT and default rules
    - SAUCE: net/mlx5e: IPsec: Add RX error flow table and copy steering rule
    - SAUCE: net/mlx5e: IPsec: Add Rx steering rule per IPsec state
    - SAUCE: net/mlx5e: IPsec: Add Connect-X IPsec Rx data path offload
    - SAUCE: net/mlx5e: IPsec: Add Connect-X IPsec ESN update offload support
    - SAUCE: net/mlx5: Add NIC TX domain namespace
    - SAUCE: net/mlx5e: IPsec: Add Tx flow table in local NIC FTs
    - SAUCE: net/mlx5e: IPsec: Add TX steering rule per IPsec state
    - SAUCE: net/mlx5e: IPsec: Add Connect-X IPsec Tx data path offload
    - SAUCE: xfrm: Fix double ESP trailer insertion in IPsec crypto offload
    - SAUCE: include/linux/security.h: Fixed typo
    - SAUCE: net/mlx5: E-Switch, Generate metadata for all vports when init
      eswitch
    - [Packaging] bootloader: remove flash-kernel and add grub-efi-arm64
    - [Packaging] uefi_signed=true
    - [Packaging] disable zfs and wireguard
    - [Config] update kernel configs
    - [Config] disable DRM, MEDIA_SUPPORT, SOUND, and XEN
    - [Config] disable options that are not needed for target platform
    - [Config] use CONFIG_PREEMPT instead of CONFIG_PREEMPT_VOLUNTARY

  * Miscellaneous upstream changes
    - net/mlx5: E-Switch, Rename egress config to generic name
    - net/mlx5: E-Switch, Rename ingress acl config in offloads mode
    - net/mlx5: E-switch, Introduce and use vlan rule config helper
    - net/mlx5: Introduce and use mlx5_esw_is_manager_vport()
    - net/mlx5: Correct comment for legacy fields
    - net/mlx5: Move metdata fields under offloads structure
    - net/mlx5: Move legacy drop counter and rule under legacy structure
    - net/mlx5: Tide up state_lock and vport enabled flag usage
    - net/mlx5: E-switch, Prepare code to handle vport enable error
    - net/mlx5: E-switch, Legacy introduce and use per vport acl tables APIs
    - net/mlx5: Move ACL drop counters life cycle close to ACL lifecycle
    - net/mlx5: E-switch, Offloads introduce and use per vport acl tables APIs
    - net/mlx5: E-switch, Offloads shift ACL programming during enable/disable
      vport
    - net/mlx5: Restrict metadata disablement to offloads mode
    - net/mlx5: Refactor ingress acl configuration
    - net/mlx5: E-switch, Enable metadata on own vport
    - IB/mlx5: Introduce and use mlx5_core_is_vf()
    - netfilter: nf_flow_table: move conntrack object to struct flow_offload
    - netfilter: nf_flow_table: detach routing information from flow description
    - netfilter: nf_flow_table: hardware offload support
    - netfilter: nf_tables_offload: Pass callback list to nft_setup_cb_call()
    - netfilter: nft_meta: offload support for interface index
    - netfilter: nf_flow_table_offload: add flow_action_entry_next() and use it
    - netfilter: nf_flow_table_offload: add IPv6 support
    - netfilter: nf_flow_table_offload: Fix check ndo_setup_tc when setup_block
    - netfilter: nf_flow_table: remove unnecessary parameter in
      flow_offload_fill_dir
    - netfilter: nf_tables_offload: remove reference to flow rule from deletion
      path
    - netfilter: nf_tables_offload: undo updates if transaction fails
    - netfilter: nf_tables: check if bind callback fails and unbind if hook
      registration fails
    - netfilter: nf_flow_table_offload: Fix block setup as TC_SETUP_FT cmd
    - netfilter: nf_flow_table_offload: Fix block_cb tc_setup_type as
      TC_SETUP_CLSFLOWER
    - netfilter: nf_flow_table_offload: Don't use offset uninitialized in
      flow_offload_port_{d,s}nat
    - netfilter: conntrack: tell compiler to not inline nf_ct_resolve_clash
    - netfilter: nf_flow_table_offload: add IPv6 match description
    - netfilter: nf_flow_table_offload: Correct memcpy size for
      flow_overload_mangle()
    - netfilter: nft_tunnel: also dump ERSPAN_VERSION
    - netfilter: nft_tunnel: also dump OPTS_ERSPAN/VXLAN
    - netfilter: nft_tunnel: add the missing nla_nest_cancel()
    - netfilter: conntrack: remove two export symbols
    - netfilter: nf_flow_table: fix big-endian integer overflow
    - netfilter: nft_meta: move time handling to helper
    - netfilter: nft_meta: move pkttype handling to helper
    - netfilter: nft_meta: move sk uid/git handling to helper
    - netfilter: nft_meta: move cgroup handling to helper
    - netfilter: nft_meta: move interface kind handling to helper
    - netfilter: nft_meta: move all interface related keys to helper
    - netfilter: nft_meta: place prandom handling in a helper
    - netfilter: nft_meta: place rtclassid handling in a helper
    - netfilter: nft_meta: add support for slave device ifindex matching
    - netfilter: nf_flow_table_offload: fix incorrect ethernet dst address
    - netfilter: nf_flow_table_offload: check the status of dst_neigh
    - netfilter: nf_flow_table_offload: fix the nat port mangle.
    - netfilter: nf_tables: unbind callbacks from flowtable destroy path
    - netfilter: flowtable: add nf_flowtable_time_stamp
    - netfilter: nf_flow_table: move priority to struct nf_flowtable
    - netfilter: nf_tables: allow netdevice to be used only once per flowtable
    - netfilter: flowtable: fetch stats only if flow is still alive
    - netfilter: flowtable: restrict flow dissector match on meta ingress device
    - netfilter: flowtable: add nf_flow_offload_work_alloc()
    - netfilter: flowtable: remove dying bit, use teardown bit instead
    - netfilter: flowtable: add nf_flowtable_hw_offload() helper function
    - netfilter: flowtable: use atomic bitwise operations for flow flags
    - netfilter: flowtable: add nf_flow_table_offload_cmd()
    - netfilter: nf_tables: white-space fixes.
    - netfilter: nf_tables: add nft_setelem_parse_key()
    - netfilter: nf_tables: add NFTA_SET_ELEM_KEY_END attribute
    - netfilter: nf_tables: Support for sets with multiple ranged fields
    - nf_tables: Add set type for arbitrary concatenation of ranges
    - netfilter: Use kvcalloc
    - netfilter: flowtable: Fix hardware flush order on nf_flow_table_cleanup
    - netfilter: flowtable: Fix missing flush hardware on table free
    - netfilter: flowtable: Fix setting forgotten NF_FLOW_HW_DEAD flag
    - netfilter: flowtable: skip offload setup if disabled
    - netfilter: conntrack: remove two args from resolve_clash
    - netfilter: conntrack: place confirm-bit setting in a helper
    - netfilter: conntrack: split resolve_clash function
    - netfilter: conntrack: allow insertion of clashing entries
    - netfilter: nf_conntrack: ct_cpu_seq_next should increase position index
    - netfilter: nf_tables: free flowtable hooks on hook register error
    - netfilter: flowtable: Add API for registering to flow table events
    - net: sched: extract common action counters update code into function
    - net: sched: extract bstats update code into function
    - net: sched: extract qstats update code into functions
    - net: sched: don't expose action qstats to skb_tc_reinsert()
    - net: sched: modify stats helper functions to support regular stats
    - net: sched: extend TCA_ACT space with TCA_ACT_FLAGS
    - net: sched: update action implementations to support flags
    - net: remove the unnecessary strict_start_type in some policies
    - net: sched: Introduce ingress classification function
    - net: sched: Pass ingress block to tcf_classify_ingress
    - net: sched: Change the block's chain list to an rcu list
    - net: sched: Support specifying a starting chain via tc skb ext
    - net/sched: act_ct: Create nf flow table per zone
    - net/sched: act_ct: Offload established connections to flow table
    - net/sched: act_ct: Software offload of established flows
    - net/sched: act_ct: Fix ipv6 lookup of offloaded connections
    - net/sched: act_ct: Use pskb_network_may_pull()
    - net/sched: act_ct: fix lockdep splat in tcf_ct_flow_table_get
    - net/sched: act_ct: Instantiate flow table entry actions
    - net/sched: act_ct: Support restoring conntrack info on skbs
    - net/sched: act_ct: Support refreshing the flow table entries
    - net/sched: act_ct: Enable hardware offload of flow table entires
    - netfilter: flowtable: Use nf_flow_offload_tuple for stats as well
    - netfilter: nft_tunnel: add support for geneve opts
    - netfilter: nf_tables: make sets built-in
    - netfilter: nf_tables: make all set structs const
    - netfilter: cleanup unused macro
    - netfilter: flowtable: add nf_flow_table_block_offload_init()
    - netfilter: flowtable: add indr block setup support
    - netfilter: flowtable: add tunnel match offload support
    - netfilter: flowtable: add tunnel encap/decap action offload support
    - netfilter: nf_tables: add nft_set_elem_expr_alloc()
    - netfilter: nf_tables: statify nft_expr_init()
    - netfilter: nf_tables: add elements with stateful expressions
    - netfilter: nf_tables: add nft_set_elem_update_expr() helper function
    - netfilter: nft_lookup: update element stateful expression
    - netfilter: conntrack: re-visit sysctls in unprivileged namespaces
    - netfilter: revert introduction of egress hook
    - netfilter: flowtable: Fix flushing of offloaded flows on free
    - netfilter: flowtable: populate addr_type mask
    - netfilter: nf_tables: Allow set back-ends to report partial overlaps on
      insertion
    - netfilter: flowtable: Fix accessing null dst entry
    - netfilter: flowtable: fix NULL pointer dereference in tunnel offload support
    - net/mlx5e: E-switch, Fix Ingress ACL groups in switchdev mode for prio tag
    - net/mlx5e: Avoid duplicating rule destinations
    - net/mlx5: Simplify fdb chain and prio eswitch defines
    - net/mlx5e: Introduce root ft concept for representors netdevs
    - net/mlx5: Define fdb tc levels per prio
    - net/mlx5: Accumulate levels for chains prio namespaces
    - net/mlx5: Refactor creating fast path prio chains
    - net/mlx5: Add new chain for netfilter flow table offload
    - net/mlx5: TC: Offload flow table rules
    - net/mlx5: Refactor mlx5_create_auto_grouped_flow_table
    - net/mlx5: fs_core: Introduce unmanaged flow tables
    - net/mlx5: Add ignore level support fwd to table rules
    - net/mlx5: Allow creating autogroups with reserved entries
    - net/mlx5: ft: Use getter function to get ft chain
    - net/mlx5: ft: Check prio and chain sanity for ft offload
    - net/mlx5: E-Switch, Refactor chains and priorities
    - net/mlx5: E-Switch, Increase number of chains and priorities
    - net/mlx5: Fix lowest FDB pool size
    - net/mlx5: Introduce mapping infra for mapping unique ids to data
    - net/mlx5: E-Switch, Move source port on reg_c0 to the upper 16 bits
    - net/mlx5: E-Switch, Get reg_c0 value on CQE
    - net/mlx5: E-Switch, Mark miss packets with new chain id mapping
    - net/mlx5e: Rx, Split rep rx mpwqe handler from nic
    - net/mlx5: E-Switch, Restore chain id on miss
    - net/mlx5e: Allow re-allocating mod header actions
    - net/mlx5e: Move tc tunnel parsing logic with the rest at tc_tun module
    - net/mlx5e: Disallow inserting vxlan/vlan egress rules without decap/pop
    - net/mlx5e: Support inner header rewrite with goto action
    - net/mlx5: E-Switch, Get reg_c1 value on miss
    - net/mlx5e: Restore tunnel metadata on miss
    - net/mlx5: Allocate smaller size tables for ft offload
    - net/mlx5e: Eswitch, Use per vport tables for mirroring
    - net/mlx5: E-Switch, Enable reg c1 loopback when possible
    - net/mlx5e: en_rep: Create uplink rep root table after eswitch offloads table
    - net/mlx5: E-Switch, Introduce global tables
    - net/mlx5: E-Switch, Add support for offloading rules with no in_port
    - net/mlx5: E-Switch, Support getting chain mapping
    - net/mlx5e: CT: Introduce connection tracking
    - net/mlx5e: CT: Offload established flows
    - net/mlx5e: CT: Handle misses after executing CT action
    - net/mlx5e: CT: Support clear action
    - net/mlx5: E-Switch: Fix using fwd and modify when firmware doesn't support
      it
    - net/mlx5: E-Switch, Skip restore modify header between prios of same chain
    - net/mlx5e: CT: Fix insert rules when TC_CT config isn't enabled
    - net/mlx5e: en_tc: Rely just on register loopback for tunnel restoration
    - net/mlx5: E-Switch, Enable restore table only if reg_c1 is supported
    - net/mlx5: E-Switch, Enable chains only if regs loopback is enabled
    - xfrm: handle NETDEV_UNREGISTER for xfrm device
    - ESP: Export esp_output_fill_trailer function

 -- Wen-chien Jesse Sung <jesse.sung@canonical.com>  Tue, 09 Jun 2020 14:11:39 +0800

linux-bluefield (5.4.0-1000.1) focal; urgency=medium

  * Miscellaneous Ubuntu changes
    - [Config] import config changes from kernel 5.0
    - SAUCE: platform/mellanox: Add bootctl driver for Mellanox BlueField SoC
    - SAUCE: i2c: i2c-mlx: I2C SMBus driver for Mellanox BlueField SoC
    - SAUCE: dt-bindings: i2c: I2C binding for Mellanox BlueField SoC
    - SAUCE: platform/mellanox: Add support for firmware update in livefish mode
    - SAUCE: platform/mellanox: Add mlx-trio driver to manage cache profile
    - SAUCE: platform/mellanox: Add BlueField performance counter driver
    - SAUCE: Add Mellanox BlueField Gigabit Ethernet driver
    - SAUCE: platform/mellanox: Add driver for BlueField PKA device
    - [Config] enable modules introduced by previous commits

  * Miscellaneous upstream changes
    - gpio: add driver for Mellanox BlueField 2 GPIO controller

 -- Wen-chien Jesse Sung <jesse.sung@canonical.com>  Tue, 19 May 2020 18:53:26 +0800

linux-bluefield (5.4.0-1000.0) focal; urgency=medium

  * empty entry

 -- Wen-chien Jesse Sung <jesse.sung@canonical.com>  Wed, 26 Feb 2020 21:34:04 +0800
