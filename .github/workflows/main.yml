name: Main

on:
  workflow_dispatch:
  schedule:
  - cron: "0 2 * * *"

jobs:
  refresh_ubuntu:
    name: refresh ubuntu tags
    runs-on: ubuntu-latest
    steps:
    - name: 'Clone repository'
      run: |
        git clone --filter=blob:none --no-checkout ${{ github.server_url }}/${{ github.repository }}
        cd ubuntu
    - name: 'Re-configure remotes'
      run: |
        cat git_config >> .git/config
        git pull --all --tags
        git push --tags
